# R-D Lagrangian optimization
对于使用H.264或者更新标准编码的视频，通常会使用拉格朗日优化技术（*Lagrangian optimization techniques*）来选择宏块模式（*macroblock mode*）和估计运动矢量（*estimation of motion vectors*）。通过最小化R-D（*rate-distortion*）代价函数，从所有可能的模式中选择每个宏块的模式。在选择的过程中，失真（*distortion*）由同一宏块的原始信号和重建信号之间的平方差之和表示，码率为用熵编码器对宏块进行编码所需的码率。类似地，可以通过最小化R-D代价函数来有效地估计运动矢量，其中失真通常由当前宏块和运动补偿宏块之间的平方差之和表示，码率为传输运动信息（运动信息包括运动矢量和其对应的参考帧序号）所需的信息的码率。上述两个最小化问题中的拉格朗日参数取决于量化参数，而量化参数又取决于目标码率。

显然，这两种最小化都需要大量的计算。虽然可以利用循环并行化，矢量化，和其它技术优化性能，但是算法也可以选择提前对出循环计算过程。提前退出循环也会带来可能的风险：

* 得到非最佳宏块模式
* 特定码率下的运动矢量可能会影响视觉质量

并行化方法将在下一节中讨论。